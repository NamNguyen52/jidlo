// Place all the behaviors and hooks related to the matching controller here.
// All this logic will automatically be available in application.js.
// You can use CoffeeScript in this file: http://coffeescript.org/


var apiCall = function() {

	var api_url = '/api/' + gon.uniqueid + '/restaurants/top'
	var api_url_two = '/api/' + gon.uniqueid + '/restaurants/toptwo'

	$.ajax({url: api_url, method: 'GET'}).done(function(data){
		if(data.venueOne != null) {
		$("p#ven1").text(data.venueOne)
		$("p#ven1Price").text(data.venueOnePrice)
		$("p#ven1Rating").text(data.venueOneRating)
		$("p#ven1Address").text(data.venueOneAddress)
		$("p#ven1Tip1").text(data.venueOneTip1)
		$("p#ven1Tip2").text(data.venueOneTip2)
		$("p#ven1Tip3").text(data.venueOneTip3)
		//$("#selected_post").attr('src', data.venueOnePhoto1)		
		$("#cube div:nth-child(1)").css('background-image', 'url(' + data.venueOnePhoto1 + ')').text(' ');
		$("#cube div:nth-child(2)").css('background-image', 'url(' + data.venueOnePhoto2 + ')').text(' ');
		$("#cube div:nth-child(3)").css('background-image', 'url(' + data.venueOnePhoto3 + ')').text(' ');
		$("#cube div:nth-child(4)").css('background-image', 'url(' + data.venueOnePhoto4 + ')').text(' ');
		$("#cube div:nth-child(5)").css('background-image', 'url(' + data.venueOnePhoto5 + ')').text(' ');
		$("#cube div:nth-child(6)").css('background-image', 'url(' + data.venueOnePhoto6 + ')').text(' ');

		//document.body.style.backgroundImage="url('http://images.dailytech.com/nimage/Ocean_Warming_Wide.png')";
		//$body.css('background-image', "url('data.venueOnePhoto1')");
		//$("p#ven1Photo1").text(data.venueOnePhoto1)

		$("p#ven2").text(data.venueTwo)
		$("p#ven2Price").text(data.venueTwoPrice)
		$("p#ven2Rating").text(data.venueTwoRating)
		$("p#ven2Address").text(data.venueTwoAddress)
		$("p#ven2Tip1").text(data.venueTwoTip1)
		$("p#ven2Tip2").text(data.venueTwoTip2)
		$("p#ven2Tip3").text(data.venueTwoTip3)
		$("#cube1 div:nth-child(1)").css('background-image', 'url(' + data.venueTwoPhoto1 + ')').text(' ');
		$("#cube1 div:nth-child(2)").css('background-image', 'url(' + data.venueTwoPhoto2 + ')').text(' ');
		$("#cube1 div:nth-child(3)").css('background-image', 'url(' + data.venueTwoPhoto3 + ')').text(' ');
		$("#cube1 div:nth-child(4)").css('background-image', 'url(' + data.venueTwoPhoto4 + ')').text(' ');
		$("#cube1 div:nth-child(5)").css('background-image', 'url(' + data.venueTwoPhoto5 + ')').text(' ');
		$("#cube1 div:nth-child(6)").css('background-image', 'url(' + data.venueTwoPhoto6 + ')').text(' ');


		$("p#ven3").text(data.venueThree)
		$("p#ven3Price").text(data.venueThreePrice)
		$("p#ven3Rating").text(data.venueThreeRating)
		$("p#ven3Address").text(data.venueThreeAddress)
		$("p#ven3Tip1").text(data.venueThreeTip1)
		$("p#ven3Tip2").text(data.venueThreeTip2)
		$("p#ven3Tip3").text(data.venueThreeTip3)
		$("#cube2 div:nth-child(1)").css('background-image', 'url(' + data.venueThreePhoto1 + ')').text(' ');
		$("#cube2 div:nth-child(2)").css('background-image', 'url(' + data.venueThreePhoto2 + ')').text(' ');
		$("#cube2 div:nth-child(3)").css('background-image', 'url(' + data.venueThreePhoto3 + ')').text(' ');
		$("#cube2 div:nth-child(4)").css('background-image', 'url(' + data.venueThreePhoto4 + ')').text(' ');
		$("#cube2 div:nth-child(5)").css('background-image', 'url(' + data.venueThreePhoto5 + ')').text(' ');
		$("#cube2 div:nth-child(6)").css('background-image', 'url(' + data.venueThreePhoto6 + ')').text(' ');
		}
	});

		$.ajax({url: api_url_two, method: 'GET'}).done(function(data){
		if(data.venue != null) {
		$("p#venueFinal").text(data.venue)
		$("p#venueFinalPrice").text(data.venuePrice)
		$("p#venueFinalRating").text(data.venueRating)
		$("p#venueFinalAddress").text(data.venueAddress)
		$("#p1").attr('src', data.venuePhoto1)
		$("#p2").attr('src', data.venuePhoto2)
		$("#p3").attr('src', data.venuePhoto3)
		$("#p4").attr('src', data.venuePhoto4)
		$("#p5").attr('src', data.venuePhoto5)
		$("#p6").attr('src', data.venuePhoto6)
		}
		
	});

		

};

var apiTimer = function() {
	setInterval( function() {apiCall()}, 5000)	
};

$('h1#title').ready(function() { 
	apiTimer();
});
